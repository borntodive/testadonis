<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ECG Chart with Realistic Grid Paper Effect</title>
    <script src="https://code.highcharts.com/highcharts.js"></script>
  </head>
  <body>
    <div id="container" style="width: 100%; height: 400px"></div>

    <script>
      // Dati di esempio ECG: valori di tensione (mV) nel tempo (ms)
      const data = [
        663, 647, 628, 602, 561, 508, 448, 384, 317, 246, 176, 115, 65, 20, -22, -58, -84, -98,
        -106, -115, -125, -134, -141, -149, -161, -174, -181, -183, -186, -193, -203, -210, -210,
        -209, -208, -207, -201, -190, -181, -177, -177, -176, -171, -168, -171, -176, -178, -176,
        -173, -173, -172, -167, -159, -154, -155, -158, -157, -152, -148, -149, -153, -156, -156,
        -157, -162, -164, -161, -151, -141, -135, -132, -129, -125, -127, -135, -145, -151, -152,
        -155, -161, -169, -172, -170, -168, -168, -166, -158, -146, -136, -132, -131, -129, -127,
        -129, -137, -147, -151, -150, -148, -145, -141, -130, -115, -102, -95, -89, -79, -66, -55,
        -49, -47, -42, -35, -30, -26, -20, -6, 10, 24, 30, 35, 44, 58, 74, 87, 100, 112, 121, 122,
        113, 100, 88, 75, 57, 34, 14, 4, 5, 9, 14, 18, 24, 30, 31, 30, 31, 38, 49, 56, 57, 58, 72,
        106, 174, 303, 513, 795, 1092, 1307, 1347, 1169, 802, 341, -90, -384, -488, -421, -253, -66,
        87, 192, 260, 306, 336, 356, 370, 387, 407, 424, 436, 446, 456, 469, 478, 484, 491, 503,
        517, 528, 537, 548, 566, 587, 608, 627, 648, 674, 700, 719, 732, 744, 760, 780, 799, 817,
        836, 859, 883, 903, 920, 941, 969, 999, 1024, 1044, 1062, 1081, 1099, 1110, 1114, 1115,
        1116, 1114, 1105, 1089, 1071, 1054, 1034, 1005, 964, 917, 867, 812, 747, 677, 609, 549, 498,
        451, 408, 375, 354, 339, 325, 312, 304, 302, 302, 299, 293, 287, 286, 284, 278, 269, 263,
        262, 263, 260, 255, 253, 258, 264, 268, 268, 269, 275, 280, 282, 279, 278, 279, 279, 274,
        266, 263, 265, 267, 265, 260, 258, 263, 272, 279, 282, 285, 288, 287, 278, 265, 255, 251,
        249, 242, 233, 225, 223, 222, 222, 223, 231, 247, 263, 273, 277, 280, 285, 289, 287, 283,
        280, 281, 280, 276, 270, 269, 275, 283, 285, 283, 280, 278, 273, 264, 254, 247, 245, 242,
        232, 220, 211, 210, 210, 207, 201, 196, 193, 188, 177, 163, 152, 145, 139, 129, 119, 112,
        108, 103, 94, 85, 86, 97, 113, 126, 137, 149, 162, 171, 174, 177, 185, 198, 209, 212, 208,
        203, 200, 194, 181, 162, 142, 125, 108, 91, 79, 75, 77, 76, 66, 53, 45, 45, 48, 48, 47, 47,
        50, 51, 54, 70, 116, 217, 390, 636, 919, 1161, 1263, 1149, 810, 328, -162, -532, -709, -696,
        -550, -351, -168, -40, 31, 66, 86, 101, 109, 108, 109, 117, 130, 139, 140, 136, 135, 138,
        140, 141, 144, 152, 166, 178, 185, 193, 206, 222, 234, 242, 250, 262, 279, 294, 308, 322,
        344, 371, 399, 423, 446, 473, 502, 527, 545, 563, 584, 607, 626, 638, 647, 659, 672, 683,
        689, 695, 702, 708, 704, 689, 666, 640, 608, 564, 506, 441, 374, 308, 242, 177, 118, 72, 34,
        0, -31, -56, -71, -78, -85, -94, -102, -103, -100, -96, -90, -75, -44, 2, 59, 129, 220, 339,
        486, 650, 815, 967, 1098, 1204, 1291, 1374, 1458, 1528, 1545, 1462, 1264, 978, 668, 398,
        215, 131, 125, 155, 179, 170, 129, 79, 38, 10, -10, -27, -42, -50, -53, -56, -60, -61, -55,
        -46, -34, -22, -5, 17, 39, 57, 70, 84, 105, 127, 144, 155, 163, 173, 182, 186, 187, 189,
        197, 208, 216, 221, 227, 236, 241, 239, 229, 219, 213, 209, 203, 194, 188, 188, 192, 197,
        202, 211, 227, 243, 253, 255, 255, 254, 250, 237, 219, 203, 191, 183, 172, 157, 142, 129,
        115, 99, 82, 70, 65, 60, 50, 35, 25, 23, 29, 35, 40, 46, 53, 57, 58, 58, 66, 84, 104, 121,
        131, 138, 144, 142, 129, 107, 83, 64, 49, 35, 25, 23, 29, 36, 40, 40, 41, 46, 50, 49, 45,
        43, 44, 44, 36, 24, 13, 6, 2, -2, -4, 0, 11, 22, 31, 38, 46, 64, 98, 164, 296, 523, 831,
        1150, 1371, 1389, 1156, 709, 163, -329, -636, -701, -563, -320, -78, 97, 194, 231, 236, 231,
        230, 238, 253, 270, 282, 289, 294, 300, 307, 311, 316, 324, 337, 349, 357, 365, 377, 393,
        406, 412, 414, 418, 426, 436, 445, 455, 472, 495, 517, 536, 553, 571, 591, 608, 618, 625,
        634, 646, 657, 662, 666, 671, 677, 679, 675, 667, 661, 657, 649, 633, 611, 584, 552, 509,
        453, 389, 325, 264, 203, 140, 82, 31, -9, -44, -76, -103, -122, -133, -144, -157, -168,
        -175, -178, -183, -196, -210, -221, -228, -234, -241, -247, -249, -248, -250, -257, -264,
        -267, -266, -267, -273, -282, -290, -298, -310, -325, -339, -345, -344, -342, -342, -342,
        -338, -333, -328, -326, -324, -319, -312, -310, -314, -319, -319, -314, -311, -312, -313,
        -311, -306, -300, -295, -287, -275, -262, -256, -257, -259, -258, -254, -251, -252, -254,
        -254, -253, -255, -259, -261, -258, -251, -245, -243, -241, -236, -232, -233, -238, -244,
        -243, -238, -234, -232, -231, -228, -222, -217, -213, -205, -191, -175, -164, -159, -156,
        -150, -143, -139, -138, -138, -135, -132, -134, -141, -145, -142, -131, -117, -100, -79,
        -54, -30, -12, -3, 3, 11, 21, 28, 32, 37, 46, 56, 63, 65, 65, 62, 52, 31, 4, -20, -33, -36,
        -35, -36, -37, -38, -41, -48, -56, -57, -48, -34, -21, -13, -6, 1, 4, 8, 20, 60, 155, 326,
        572, 856, 1104, 1225, 1146, 858, 430, -15, -356, -528, -533, -423, -265, -117, -7, 59, 94,
        116, 131, 140, 141, 142, 152, 171, 191, 206, 216, 225, 237, 250, 260, 268, 278, 292, 306,
        316, 324, 334, 350, 367, 381, 393, 409, 431, 453, 472, 488, 505, 525, 546, 565, 584, 607,
        636, 666, 691, 711, 732, 757, 783, 807, 828, 850, 872, 889, 897, 899, 902, 909, 916, 915,
        907, 896, 881, 859, 826, 783, 737, 689, 638, 582, 525, 472, 425, 382, 337, 294, 259, 231,
        206, 180, 154, 135, 125, 118, 111, 105, 101, 101, 98, 89, 77, 68, 63, 60, 53, 45, 42, 45,
        50, 54, 59, 69, 81, 92, 96, 95, 95, 98, 99, 97, 93, 93, 96, 96, 91, 83, 79, 83, 90, 97, 104,
        113, 121, 124, 120, 114, 110, 112, 114, 113, 110, 113, 119, 124, 123, 120, 120, 125, 131,
        135, 139, 145, 153, 157, 158, 159, 165, 176, 186, 189, 189, 188, 189, 186, 179, 169, 164,
        162, 160, 153, 146, 143, 145, 147, 146, 145, 148, 152, 152, 146, 138, 134, 133, 131, 125,
        119, 119, 125, 132, 138, 143, 152, 161, 166, 164, 159, 156, 154, 149, 139, 129, 123, 120,
        115, 108, 102, 102, 108, 114, 117, 122, 131, 145, 156, 161, 164, 169, 175, 178, 178, 181,
        192, 207, 220, 228, 233, 239, 244, 243, 231, 213, 192, 169, 145, 122, 106, 102, 106, 109,
        107, 105, 106, 110, 112, 114, 116, 124, 134, 142, 144, 145, 155, 179, 232, 338, 527, 794,
        1088, 1310, 1363, 1192, 819, 336, -125, -445, -563, -495, -316, -117, 42, 143, 198, 226,
        237, 238, 237, 240, 249, 261, 274, 287, 302, 316, 324, 327, 329, 336, 346, 353, 358, 364,
        375, 388, 398, 404, 412, 425, 441, 455, 465, 475, 489, 504, 515, 523, 533, 547, 565, 579,
        590, 603, 620, 639, 654, 666, 680, 698, 716, 728, 733, 734, 736, 737, 731, 721, 710, 700,
        686, 665, 636, 605, 578, 551, 520, 486, 453, 425, 402, 379, 359, 346, 343, 344, 346, 348,
        356, 373, 395, 416, 436, 457, 484, 513, 538, 560, 581, 603, 621, 631, 634, 638, 646, 654,
        659, 662, 667, 676, 684, 687, 685, 681, 678, 674, 663, 649, 636, 627, 618, 604, 585, 568,
        554, 541, 525, 509, 497, 492, 486, 475, 458, 440, 424, 405, 382, 356, 334, 317, 301, 283,
        265, 251, 245, 241, 233, 223, 215, 208, 200, 187, 171, 158, 150, 141, 127, 110, 93, 81, 70,
        58, 45, 38, 35, 31, 22, 10, -1, -10, -22, -39, -59, -77, -91, -104, -120, -134, -141, -139,
        -136, -135, -137, -139, -138, -139, -147, -157, -166, -172, -178, -189, -200, -207, -209,
        -211, -217, -224, -227, -224, -222, -223, -228, -230, -231, -235, -245, -256, -262, -262,
        -260, -261, -263, -261, -255, -251, -249, -247, -239, -226, -215, -210, -207, -202, -193,
        -184, -180, -179, -178, -176, -177, -181, -184, -182, -175, -172, -177, -190, -209, -233,
        -264, -302, -339, -367, -387, -405, -427, -449, -468, -482, -497, -512, -527, -538, -545,
        -555, -570, -585, -595, -598, -592, -572, -515, -387, -172, 108, 387, 568, 565, 337, -79,
        -571, -997, -1246, -1285, -1160, -957, -755, -601, -506, -460, -443, -434, -419, -399, -378,
        -357, -335, -314, -295, -282, -274, -264, -248, -228, -209, -194, -181, -164, -143, -123,
        -105, -84, -58, -28, -1, 24, 48, 75, 104, 129, 150, 170, 194, 220, 244, 263, 281, 304, 330,
        354, 377, 399, 425, 452, 473, 487, 499, 511, 523, 527, 523, 515, 507, 495, 477, 450, 418,
        387, 353, 312, 265, 217, 171, 126, 79, 30, -16, -55, -86, -115, -143, -166, -178, -184,
        -188, -192, -193, -187, -179, -173, -171, -168, -160, -151, -145, -143, -142, -138, -135,
        -137, -141, -143, -138, -127, -118, -111, -104, -94, -84, -78, -78, -78, -77, -78, -86, -98,
        -110, -116, -119, -123, -131, -137, -140, -142, -147, -154, -159, -159, -160, -165, -175,
        -183, -186, -185, -187, -192, -196, -196, -195, -195, -194, -189, -176, -160, -148, -143,
        -139, -136, -135, -139, -144, -146, -143, -138, -137, -142, -146, -146, -144, -144, -146,
        -145, -139, -135, -135, -141, -146, -147, -148, -152, -159, -164, -166, -167, -173, -179,
        -182, -180, -175, -175, -178, -179, -176, -172, -170, -170, -168, -165, -165, -169, -177,
        -181, -178, -172, -167, -164, -158, -149, -140, -138, -142, -144, -144, -143, -146, -150,
        -152, -151, -149, -150, -152, -151, -144, -136, -131, -130, -128, -123, -121, -124, -127,
        -123, -111, -97, -89, -87, -86, -82, -75, -66, -55, -39, -21, -7, -4, -10, -21, -34, -50,
        -69, -86, -94, -93, -90, -91, -96, -97, -92, -82, -70, -57, -40, -23, -10, -5, -3, 1, 16,
        44, 98, 205, 393, 661, 958, 1197, 1285, 1164, 845, 406, -32, -354, -497, -472, -345, -191,
        -60, 34, 94, 130, 147, 154, 157, 160, 166, 173, 181, 190, 201, 210, 216, 221, 230, 241, 248,
        247, 245, 246, 255, 268, 281, 297, 316, 338, 357, 371, 385, 403, 426, 447, 461, 472, 484,
        499, 511, 519, 525, 535, 548, 562, 576, 592, 615, 641, 663, 678, 688, 698, 706, 708, 698,
        680, 659, 637, 608, 570, 526, 481, 434, 382, 326, 271, 222, 179, 136, 92, 49, 13, -16, -43,
        -69, -91, -106, -116, -125, -137, -145, -147, -143, -138, -134, -130, -122, -112, -108,
        -109, -112, -112, -108, -104, -102, -98, -90, -79, -69, -62, -55, -44, -30, -20, -15, -10,
        -2, 7, 13, 12, 11, 12, 16, 17, 15, 12, 14, 19, 24, 28, 34, 45, 57, 64, 63, 61, 61, 63, 64,
        61, 59, 62, 66, 66, 62, 59, 63, 72, 83, 92, 101, 113, 123, 127, 124, 121, 124, 130, 135,
        138, 140, 147, 156, 163, 169, 177, 191, 206, 216, 219, 220, 222, 224, 224, 220, 218, 220,
        224, 225, 223, 223, 229, 237, 243, 245, 247, 251, 255, 255, 249, 243, 242, 243, 242, 239,
        238, 242, 249, 255, 262, 272, 288, 303, 310, 309, 305, 302, 300, 296, 289, 286, 288, 292,
        293, 292, 294, 301, 312, 322, 331, 344, 362, 381, 397, 410, 423, 437, 448, 451, 448, 442,
        436, 425, 406, 381, 360, 351, 353, 361, 372, 383, 392, 394, 386, 376, 371, 378, 389, 399,
        404, 410, 417, 426, 439, 466, 534, 672, 894, 1183, 1477, 1681, 1701, 1487, 1071, 565, 114,
        -167, -240, -143, 45, 242, 400, 498, 546, 566, 578, 590, 600, 603, 604, 608, 613, 616, 613,
        608, 607, 611, 617, 619, 620, 623, 632, 644, 653, 662, 676, 693, 709, 719, 726, 736, 751,
        767, 780, 789, 799, 811, 824, 836, 850, 871, 899, 928, 951, 968, 984, 999, 1011, 1017, 1020,
        1026, 1035, 1042, 1042, 1036, 1029, 1022, 1010, 989, 960, 926, 887, 838, 776, 707, 638, 574,
        513, 452, 395, 345, 306, 273, 244, 220, 205, 198, 193, 184, 175, 168, 166, 161, 150, 136,
        125, 118, 112, 104, 96, 92, 92, 92, 88, 84, 84, 89, 94, 96, 97, 101, 107, 110, 108, 103, 99,
        97, 94, 86, 80, 79, 84, 88, 89, 88, 90, 96, 101, 103, 104, 108, 113, 114, 111, 106, 106,
        111, 118, 122, 126, 134, 145, 157, 168, 179, 194, 210, 220, 223, 223, 227, 238, 248, 254,
        257, 263, 269, 275, 278, 282, 290, 303, 314, 321, 326, 333, 340, 344, 341, 338, 339, 343,
        346, 346, 346, 351, 361, 371, 380, 388, 398, 410, 417, 417, 417, 419, 423, 424, 419, 413,
        411, 412, 414, 414, 415, 421, 430, 436, 437, 438, 443, 448, 448, 443, 436, 432, 433, 434,
        433, 433, 440, 450, 458, 464, 471, 482, 494, 503, 506, 506, 508, 511, 512, 511, 513, 519,
        527, 531, 531, 533, 544, 562, 581, 595, 605, 614, 620, 620, 616, 612, 612, 613, 610, 600,
        586, 572, 555, 534, 510, 490, 483, 485, 489, 491, 492, 491, 487, 477, 464, 456, 457, 463,
        468, 469, 471, 478, 492, 516, 562, 662, 843, 1105, 1400, 1644, 1737, 1611, 1267, 783, 296,
        -60, -208, -158, 16, 223, 399, 518, 585, 614, 627, 637, 648, 658, 664, 666, 669, 675, 681,
        684, 685, 688, 695, 704, 709, 712, 717, 728, 742, 752, 758, 764, 772, 781, 787, 790, 797,
        809, 822, 830, 834, 838, 848, 861, 873, 886, 902, 924, 945, 958, 965, 969, 976, 983, 986,
        987, 988, 991, 990, 982, 965, 946, 928, 906, 876, 836, 792, 746, 697, 641, 579, 517, 460,
        404, 345, 288, 238, 201, 172, 149, 129, 116, 110, 104, 94, 83, 77, 79, 85, 90, 91, 93, 95,
        96, 94, 92, 94, 104, 115, 122, 124, 127, 133, 141, 145, 147, 152, 159, 164, 164, 161, 163,
        170, 180, 185, 188, 190, 195, 197, 193, 187, 184, 187, 191, 191, 188, 186, 187, 186, 182,
        175, 172, 174, 179, 181, 183, 187, 191, 191, 182, 167, 154, 147, 141, 133, 122, 115, 114,
        118, 124, 134, 149, 166, 177, 176, 170, 166, 167, 170, 169, 166, 166, 167, 167, 163, 157,
        156, 161, 166, 168, 169, 173, 181, 187, 188, 186, 186, 188, 190, 187, 184, 186, 194, 204,
        210, 216, 224, 236, 246, 251, 254, 259, 266, 269, 265, 259, 256, 258, 260, 258, 254, 254,
        258, 263, 265, 268, 275, 285, 293, 295, 293, 291, 290, 285, 276, 267, 264, 267, 269, 268,
        266, 267, 272, 277, 279, 280, 286, 292, 294, 289, 280, 275, 276, 278, 276, 273, 271, 269,
        261, 246, 225, 206, 190, 175, 162, 155, 158, 167, 172, 167, 157, 148, 142, 138, 135, 136,
        144, 158, 171, 181, 190, 207, 236, 287, 388, 566, 823, 1110, 1335, 1397, 1240, 881, 410,
        -48, -376, -512, -469, -316, -136, 10, 105, 159,
      ]
      const ecgData = []
      let timeIncrement = 0
      for (let i = 0; i < data.length; i++) {
        const value = data[i] / 1000
        ecgData.push([timeIncrement, value])
        timeIncrement = timeIncrement + 4
      }
      const xAxis = {
        // gridLineWidth: 1,
        title: {
          text: 'date,time',
        },
        tickInterval: 200,
        minorTicks: true,
        minorTickInterval: 40,
        gridLineWidth: 1,
        minorGridLineColor: 'red',
        minorGridLineDashStyle: 'dot',
        gridLineColor: 'red',
        type: 'datetime',
      }
      const yAxis = {
        opposite: false,
        tickInterval: 0.5,
        minorTicks: true,
        minorTickInterval: 0.1,
        gridLineWidth: 1,
        minorGridLineColor: 'red',
        minorGridLineDashStyle: 'dot',
        gridLineColor: 'red',
        title: {
          text: 'mV',
        },
      }
      Highcharts.chart('container', {
        chart: {
          type: 'line',
          zoomType: 'x',
          //backgroundColor: '#f0f8ff', // Sfondo azzurro chiaro per simulare carta millimetrata
        },
        title: {
          text: 'ECG Signal',
        },
        xAxis: {
          title: {
            text: 'Time (s)',
          },
          type: 'datetime', // Use datetime for the x-axis
          labels: {
            formatter: function () {
              if (this.value % 1000 === 0) return this.value / 1000 // Format to seconds with 2 decimal places
            },
          },
          type: 'linear',
          minorTicks: true,

          gridLineWidth: 1, // Linea sottile per griglia millimetrica
          minorGridLineWidth: 0.5, // Linea ancora più sottile per le divisioni minori
          minorTickInterval: 40, // Linea sottile ogni 40 ms
          tickInterval: 200, // Linea spessa ogni 200 ms (quadrato grande)
          gridLineColor: '#cccccc', // Linea griglia principale
          minorGridLineColor: '#00', // Linea griglia minore
        },
        yAxis: {
          title: {
            text: 'Amplitude (mV)',
          },

          gridLineWidth: 1, // Linea sottile per griglia millimetrica
          minorGridLineWidth: 0.5, // Linea ancora più sottile per le divisioni minori
          minorTickInterval: 0.1, // Linea sottile ogni 0.1 mV
          tickInterval: 0.5, // Linea spessa ogni 0.5 mV (quadrato grande)
          gridLineColor: '#cccccc', // Linea griglia principale
          minorGridLineColor: '#eeeeee', // Linea griglia minore
        },
        tooltip: {
          valueSuffix: ' mV',
        },
        series: [
          {
            name: 'ECG Signal',
            data: ecgData,
            marker: {
              enabled: false,
            },
            color: '#FF0000',
            lineWidth: 2,
          },
        ],
      })
    </script>
  </body>
</html>
